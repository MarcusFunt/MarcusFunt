<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Plant Occurrences</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    >
    <style>
      /* Grid layout for plant cards */
      .plant-list {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        padding: 0;
        margin: 0;
        list-style: none;
      }
      .plant-item {
        display: flex;
        align-items: center;
        width: calc(33.333% - 1rem);
        padding: 0.75rem;
        background: #fff;
        border-radius: 0.5rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        text-decoration: none;
        color: inherit;
        transition: transform 0.2s, box-shadow 0.2s;
      }
      .plant-item:hover {
        transform: translateY(-4px);
        box-shadow: 0 6px 18px rgba(0,0,0,0.12);
      }
      .plant-thumb {
        width: 64px;
        height: 64px;
        object-fit: cover;
        border-radius: 0.5rem;
        margin-right: 1rem;
        flex-shrink: 0;
      }

      /* Slider card styling */
      .slider-card {
        background: #fff;
        padding: 1rem 1.25rem;
        border-radius: 0.5rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        margin-bottom: 1.5rem;
        max-width: 400px;
      }
      .slider-label {
        font-weight: 500;
        margin-bottom: 0.5rem;
        display: block;
      }
      /* Custom fill on the track */
      #desperation-slider::-webkit-slider-runnable-track {
        height: 6px;
        background: linear-gradient(
          to right,
          #28a745 0%,
          #28a745 var(--slider-percent),
          #ddd var(--slider-percent),
          #ddd 100%
        );
        border-radius: 3px;
      }
      #desperation-slider {
        width: 100%;
        height: 24px;
        background: transparent;
        -webkit-appearance: none;
      }
      #desperation-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: #28a745;
        margin-top: -5px;
        cursor: pointer;
        transition: background 0.2s;
      }
      #desperation-slider::-webkit-slider-thumb:hover {
        background: #218838;
      }
    </style>
  </head>
  <body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">Plant Occurrences</a>
      </div>
    </nav>

    <div class="container">
      <h1 class="mb-4">Species List</h1>

      <!-- Slider UI -->
      <div class="slider-card">
        <label for="desperation-slider" class="slider-label">
          Desperation Factor: <span id="desperation-value">0.00</span>
        </label>
        <input
          type="range"
          id="desperation-slider"
          min="0"
          max="1"
          step="0.01"
          value="0"
        >
      </div>

            <!-- Plant grid -->
      <ul class="plant-list">
        <li><a href="almindelig-bulmeurt.html" class="plant-item">
          <strong>Almindelig bulmeurt</strong> — Hyoscyamus niger L.
        </a></li>
        <li><a href="almindelig-gyvel.html" class="plant-item">
          <strong>Almindelig gyvel</strong> — Cytisus scoparius (L.) Link
        </a></li>
        <li><a href="almindelig-humle.html" class="plant-item">
          <strong>Almindelig humle</strong> — Humulus lupulus L.
        </a></li>
        <li><a href="almindelig-kanariegr-s.html" class="plant-item">
          <strong>Almindelig kanariegræs</strong> — Phalaris canariensis L.
        </a></li>
        <li><a href="almindelig-katteurt.html" class="plant-item">
          <strong>Almindelig katteurt</strong> — Nepeta cataria L.
        </a></li>
        <li><a href="ananas-salvie.html" class="plant-item">
          <strong>Ananas-salvie</strong> — Salvia elegans Vahl
        </a></li>
        <li><a href="bl-fodet-sk-rhat.html" class="plant-item">
          <strong>Blåfodet skørhat</strong> — Pluteus cyanopus Quel.
        </a></li>
        <li><a href="bl-gr-n-tr-vlhat.html" class="plant-item">
          <strong>Blågrøn trøvlhat</strong> — Inocybe haemacta (Berk. & Cooke) Sacc.
        </a></li>
        <li><a href="bl-nende-n-genhat.html" class="plant-item">
          <strong>Blånende nøgenhat</strong> — Psilocybe cyanescens Wakef.
        </a></li>
        <li><a href="bonde-tobak.html" class="plant-item">
          <strong>Bonde-tobak</strong> — Nicotiana rustica L.
        </a></li>
        <li><a href="br-nden-lde.html" class="plant-item">
          <strong>Brændenælde</strong> — Urtica dioica L.
        </a></li>
        <li><a href="citronmelisse.html" class="plant-item">
          <strong>Citronmelisse</strong> — Melissa officinalis L.
        </a></li>
        <li><a href="engleblomme.html" class="plant-item">
          <strong>Engleblomme</strong> — Datura ferox L.
        </a></li>
        <li><a href="ephedra-distachya.html" class="plant-item">
          <strong>Ephedra distachya</strong> — Ephedra distachya L.
        </a></li>
        <li><a href="gifturt.html" class="plant-item">
          <strong>Gifturt</strong> — Conium maculatum L.
        </a></li>
        <li><a href="gr-bynke.html" class="plant-item">
          <strong>Gråbynke</strong> — Artemisia vulgaris L.
        </a></li>
        <li><a href="gr-nspuklet-tr-vlhat.html" class="plant-item">
          <strong>Grønspuklet trøvlhat</strong> — Inocybe corydalina Quel.
        </a></li>
        <li><a href="gul-kande.html" class="plant-item">
          <strong>Gul åkande</strong> — Nuphar lutea (L.) Sm.
        </a></li>
        <li><a href="hamp.html" class="plant-item">
          <strong>Hamp</strong> — Cannabis sativa L.
        </a></li>
        <li><a href="have-malurt.html" class="plant-item">
          <strong>Have-malurt</strong> — Artemisia absinthium L.
        </a></li>
        <li><a href="hermelrude.html" class="plant-item">
          <strong>Hermelrude</strong> — Peganum harmala L.
        </a></li>
        <li><a href="hjertetr-st.html" class="plant-item">
          <strong>Hjertetrøst</strong> — Leonurus cardiaca L.
        </a></li>
        <li><a href="hulrodet-l-rkespore.html" class="plant-item">
          <strong>Hulrodet lærkespore</strong> — Corydalis cava (L.) Schweigg. & Korte
        </a></li>
        <li><a href="hvid-kande.html" class="plant-item">
          <strong>Hvid åkande</strong> — Nymphaea alba L.
        </a></li>
        <li><a href="ipomoea-tricolor.html" class="plant-item">
          <strong>Ipomoea tricolor</strong> — Ipomoea tricolor Cav.
        </a></li>
        <li><a href="japansk-humle.html" class="plant-item">
          <strong>Japansk humle</strong> — Humulus japonicus Siebold & Zucc.
        </a></li>
        <li><a href="kalmus.html" class="plant-item">
          <strong>Kalmus</strong> — Acorus calamus L.
        </a></li>
        <li><a href="korn-valmue.html" class="plant-item">
          <strong>Korn-valmue</strong> — Papaver rhoeas L.
        </a></li>
        <li><a href="kortakset-kanariegr-s.html" class="plant-item">
          <strong>Kortakset kanariegræs</strong> — Phalaris brachystachys Link
        </a></li>
        <li><a href="langknoldet-kanariegr-s.html" class="plant-item">
          <strong>Langknoldet kanariegræs</strong> — Phalaris aquatica L.
        </a></li>
        <li><a href="langstilket-l-rkespore.html" class="plant-item">
          <strong>Langstilket lærkespore</strong> — Corydalis solida (L.) Clairv.
        </a></li>
        <li><a href="liden-glansfr.html" class="plant-item">
          <strong>Liden glansfr</strong> — Phalaris minor Retz.
        </a></li>
        <li><a href="lysstokket-glanshat.html" class="plant-item">
          <strong>Lysstokket glanshat</strong> — Panaeolus olivaceus F.H. Müller
        </a></li>
        <li><a href="l-ge-anjersanker.html" class="plant-item">
          <strong>Læge-anjersanker</strong> — Agrimonia eupatoria L.
        </a></li>
        <li><a href="l-ge-baldrian.html" class="plant-item">
          <strong>Læge-baldrian</strong> — Valeriana officinalis L.
        </a></li>
        <li><a href="markmynte.html" class="plant-item">
          <strong>Markmynte</strong> — Mentha arvensis L.
        </a></li>
        <li><a href="meldr-jer.html" class="plant-item">
          <strong>Meldrøjer</strong> — Claviceps purpurea (Fr.) Tul.
        </a></li>
        <li><a href="mexicansk-pigvalmue.html" class="plant-item">
          <strong>Mexicansk pigvalmue</strong> — Argemone mexicana L.
        </a></li>
        <li><a href="mose-skvalderk-l.html" class="plant-item">
          <strong>Mose-skvalderkål</strong> — Scutellaria galericulata L.
        </a></li>
        <li><a href="natskygge.html" class="plant-item">
          <strong>Natskygge</strong> — Solanum dulcamara L.
        </a></li>
        <li><a href="nattskat.html" class="plant-item">
          <strong>Nattskat</strong> — Atropa belladonna L.
        </a></li>
        <li><a href="okkergul-fluesvamp.html" class="plant-item">
          <strong>Okkergul fluesvamp</strong> — Amanita gemmata (Fr.) Bertillon
        </a></li>
        <li><a href="opium-valmue.html" class="plant-item">
          <strong>Opium-valmue</strong> — Papaver somniferum L.
        </a></li>
        <li><a href="panter-fluesvamp.html" class="plant-item">
          <strong>Panter-fluesvamp</strong> — Amanita pantherina (DC.) Krombh.
        </a></li>
        <li><a href="pig-ble.html" class="plant-item">
          <strong>Pigæble</strong> — Datura stramonium L.
        </a></li>
        <li><a href="prikbladet-perikon.html" class="plant-item">
          <strong>Prikbladet perikon</strong> — Hypericum perforatum L.
        </a></li>
        <li><a href="pr-gtig-n-genhat.html" class="plant-item">
          <strong>Prægtig nøgenhat</strong> — Psilocybe fimetaria (P.D. Orton) Watling
        </a></li>
        <li><a href="randblomstret-glanshat.html" class="plant-item">
          <strong>Randblomstret glanshat</strong> — Panaeolus cinctulus (Bolton) Britzelm.
        </a></li>
        <li><a href="rude.html" class="plant-item">
          <strong>Rude</strong> — Ruta graveolens L.
        </a></li>
        <li><a href="r-d-fluesvamp.html" class="plant-item">
          <strong>Rød fluesvamp</strong> — Amanita muscaria (L.) Hook.
        </a></li>
        <li><a href="r-llike.html" class="plant-item">
          <strong>Røllike</strong> — Achillea millefolium L.
        </a></li>
        <li><a href="sandlobelia.html" class="plant-item">
          <strong>Sandlobelia</strong> — Tanacetum vulgare L.
        </a></li>
        <li><a href="sibirisk-hjertespand.html" class="plant-item">
          <strong>Sibirisk hjertespand</strong> — Leonurus sibiricus L.
        </a></li>
        <li><a href="skarleje.html" class="plant-item">
          <strong>Skarleje</strong> — Salvia sclarea L.
        </a></li>
        <li><a href="slimb-ger-n-genhat.html" class="plant-item">
          <strong>Slimbæger-nøgenhat</strong> — Psilocybe liniformans Guzman & Bas
        </a></li>
        <li><a href="spids-n-genhat.html" class="plant-item">
          <strong>Spids nøgenhat</strong> — Psilocybe semilanceata (Fr.) P. Kumm.
        </a></li>
        <li><a href="stak-glansfr.html" class="plant-item">
          <strong>Stak-glansfr</strong> — Phalaris paradoxa L.
        </a></li>
        <li><a href="stiv-sk-rhat.html" class="plant-item">
          <strong>Stiv skørhat</strong> — Pluteus salicinus (Pers.) P. Kumm.
        </a></li>
        <li><a href="stor-jernurt.html" class="plant-item">
          <strong>Stor jernurt</strong> — Chelidonium majus L.
        </a></li>
        <li><a href="tagr-r.html" class="plant-item">
          <strong>Tagrør</strong> — Phragmites australis (Cav.) Trin. ex Steud.
        </a></li>
        <li><a href="tidlig-glanshat.html" class="plant-item">
          <strong>Tidlig glanshat</strong> — Panaeolus fimicola (Pers.) Gillet
        </a></li>
        <li><a href="vellugtende-kamille.html" class="plant-item">
          <strong>Vellugtende kamille</strong> — Matricaria chamomilla L.
        </a></li>
        <li><a href="vild-salat.html" class="plant-item">
          <strong>Vild salat</strong> — Lactuca virosa L.
        </a></li>
        <li><a href="virginsk-tobak.html" class="plant-item">
          <strong>Virginsk tobak</strong> — Nicotiana tabacum L.
        </a></li>
      </ul>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const list = document.querySelector('.plant-list');
        const entries = Array.from(list.querySelectorAll('a.plant-item'));
        const slider = document.getElementById('desperation-slider');
        const valueDisplay = document.getElementById('desperation-value');

        // Build data objects
        const plants = entries.map(el => ({
          el,
          url: el.href,
          weed: 0,
          find: 0,
          img: null,
          score: 0
        }));

        // Fetch each page to extract stats + thumbnail
        Promise.all(plants.map(p =>
          fetch(p.url)
            .then(r => r.text())
            .then(html => {
              const doc = new DOMParser().parseFromString(html, 'text/html');
              const stats = [...doc.querySelectorAll('p')]
                .find(x => /Weed Scale/.test(x.textContent));
              const m = stats?.textContent.match(
                /Weed Scale:\s*([\d.]+)\s*,\s*Findability:\s*([\d.]+)/
              );
              if (m) [p.weed, p.find] = [parseFloat(m[1]), parseFloat(m[2])];
              const imgEl = doc.querySelector('.card-img-top');
              if (imgEl) p.img = imgEl.src;
            })
        )).then(() => {
          // Insert thumbnails
          plants.forEach(p => {
            if (p.img) {
              const img = document.createElement('img');
              img.src = p.img;
              img.alt = p.el.querySelector('strong').textContent;
              img.className = 'plant-thumb';
              p.el.insertBefore(img, p.el.firstChild);
            }
          });

          // Sorting & render
          function updateList(factor) {
            plants.forEach(p => {
              p.score = (1 - factor) * p.weed + factor * p.find;
            });
            plants.sort((a, b) => b.score - a.score);
            plants.forEach(p => list.appendChild(p.el.parentNode));
          }

          // Slider interaction
          function onSlide() {
            const f = parseFloat(slider.value);
            valueDisplay.textContent = f.toFixed(2);
            slider.style.setProperty('--slider-percent', `${f * 100}%`);
            updateList(f);
          }
          slider.addEventListener('input', onSlide);

          // Initial render
          onSlide();
        }).catch(console.error);
      });
    </script>
  </body>
</html>
